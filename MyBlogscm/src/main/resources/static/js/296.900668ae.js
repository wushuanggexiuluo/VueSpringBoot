(self["webpackChunkourblog"]=self["webpackChunkourblog"]||[]).push([[296],{3534:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});a(4916);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pageDataCls"},[t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"搜内容"}},[t("el-input",{attrs:{placeholder:"随便输入"},model:{value:e.search.content,callback:function(t){e.$set(e.search,"content",t)},expression:"search.content"}})],1)],1),t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"搜标题"}},[t("el-input",{attrs:{placeholder:"随便输入"},model:{value:e.search.title,callback:function(t){e.$set(e.search,"title",t)},expression:"search.title"}})],1)],1)],1),t("div",{staticStyle:{display:"flex"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),t("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.dialogVisibleAdd=!0}}},[e._v("新增")]),t("el-button",{attrs:{type:"danger",plain:""},on:{click:e.manyRemoveUser}},[e._v("批量删除")])],1),[t("el-table",{ref:"clearCheckBox",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),t("el-table-column",{attrs:{label:"序号",type:"index",width:"48"}}),t("el-table-column",{attrs:{align:"center",prop:"articleId",label:"文章ID"}}),t("el-table-column",{attrs:{align:"center",prop:"articleUserId",label:"用户ID"}}),t("el-table-column",{attrs:{align:"center",prop:"articleTitle",label:"文章标题"}}),t("el-table-column",{attrs:{align:"center",prop:"articleViewCount",sortable:"",label:"浏览量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleCommentCount",sortable:"",label:"评论量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleDianzanCount",sortable:"",label:"点赞量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleUpdateTime",label:"更新时间",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"articleCreateTime",label:"创建时间",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"",label:"摘要"}}),t("el-table-column",{attrs:{align:"center",prop:"articleThImg",label:"封面地址"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",[e._v(e._s(a.row.articleThImg))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("img",{attrs:{width:"90",src:a.row.articleThImg}})])])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"operation",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editUser(a.row)}}},[e._v("修改")]),t("br"),t("br"),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.removeUser(a.row)}}},[e._v("删除")])]}}])})],1)],t("el-pagination",{attrs:{small:"","pager-count":1,"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{staticClass:"el-dialog11",attrs:{fullscreen:!0,modal:!1,title:"新增文章",visible:e.dialogVisibleAdd,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleAdd=t}}},[t("MyMarkDown",{attrs:{MyMarkDownData:"hello"},on:{formSubmit:e.translateText}}),t("el-form",{staticStyle:{margin:"10px auto"},attrs:{"label-width":"80px",model:e.addForm}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{model:{value:e.addForm.articleTitle,callback:function(t){e.$set(e.addForm,"articleTitle",t)},expression:"addForm.articleTitle"}})],1),t("el-form-item",{attrs:{label:"摘要"}},[t("el-input",{model:{value:e.addForm.articleSummary,callback:function(t){e.$set(e.addForm,"articleSummary",t)},expression:"addForm.articleSummary"}})],1),t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[t("el-form-item",{staticStyle:{"background-color":"wheat",height:"200px"},attrs:{label:"文章便签"}},[t("ArticleTags",{attrs:{isEdit:!0,categoryContent:e.addForm.category}})],1),t("img",{staticStyle:{width:"100px",height:"100px"},attrs:{alt:"NULL",src:e.addForm.articleThImg}}),t("el-upload",{attrs:{action:"","list-type":"picture-card","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[t("div",[e._v("点击上传文章封面")])])],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"success",round:""},on:{click:e.SubmitCli}},[e._v("提交")]),t("el-button",{attrs:{type:"info",round:""},on:{click:e.ZanCunCli}},[e._v("暂存")]),t("el-button",{attrs:{type:"danger",round:""},on:{click:e.QingKongCli}},[e._v("清空")])],1)],1)],1),t("el-dialog",{staticClass:"el-dialog11",attrs:{fullscreen:!0,modal:!1,title:"修改文章",visible:e.dialogVisibleUpdate,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleUpdate=t}}},[t("MyMarkDown",{attrs:{MyMarkDownData:this.updateForm.articleContent},on:{formSubmit:e.translateText}}),t("el-form",{staticClass:"EditForm",attrs:{"label-width":"80px",model:e.updateForm}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"标题"}},[t("el-input",{model:{value:e.updateForm.articleContent,callback:function(t){e.$set(e.updateForm,"articleContent",t)},expression:"updateForm.articleContent"}})],1),t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{model:{value:e.updateForm.articleTitle,callback:function(t){e.$set(e.updateForm,"articleTitle",t)},expression:"updateForm.articleTitle"}})],1),t("el-form-item",{attrs:{label:"摘要"}},[t("el-input",{model:{value:e.updateForm.articleSummary,callback:function(t){e.$set(e.updateForm,"articleSummary",t)},expression:"updateForm.articleSummary"}})],1),t("div",{},[t("el-form-item",{staticStyle:{"background-color":"wheat",height:"200px","/* height":"200px","*/\n    display":"flex","flex-direction":"column"},attrs:{label:"文章标签"}},[t("ArticleTags",{attrs:{isEdit:!0,getNewTag:e.getNewTag,categoryContent:e.updateForm.category}})],1),t("div",{staticClass:"imggroup"},[t("img",{staticStyle:{width:"148px",height:"148px"},attrs:{alt:"请上传图片",src:e.updateForm.articleThImg}}),t("el-upload",{attrs:{action:"","list-type":"picture-card","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[t("div",[e._v("点击上传文章封面")])])],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"success",round:""},on:{click:e.UpadetCli}},[e._v("提交")]),t("el-button",{attrs:{type:"danger",round:""},on:{click:function(t){e.dialogVisibleUpdate=!1}}},[e._v("返回")])],1)],1)],1)],2)},i=[],r=(a(3948),a(285),a(1637),a(7658),function(){var e=this,t=e._self._c;return t("div",[t("MavonEditor",{model:{value:e.myMarkDownData,callback:function(t){e.myMarkDownData=t},expression:"myMarkDownData"}})],1)}),s=[],n=a(1374),o={name:"MyMarkDown",props:["MyMarkDownData"],components:{MavonEditor:n.ZP},data(){return{myMarkDownData:this.MyMarkDownData}},watch:{MyMarkDownData(e){this.myMarkDownData=e},myMarkDownData(e){this.$emit("formSubmit",e)}},methods:{submit(){this.filterHtmlCharset(this.myMarkDownData)},filterHtmlCharset(e){var t=/([\u4e00-\u9fa5])|(\d)|(\w)|([,\\.!。，?])/g;return e.match(t).join("")}}},c=o,d=a(1001),u=(0,d.Z)(c,r,s,!1,null,null,null),m=u.exports,p=function(){var e=this,t=e._self._c;return t("div",[e._l(e.category,(function(a,l){return t("el-tag",{key:l,attrs:{closable:e.isEdit,"disable-transitions":!1,type:"success"},on:{close:function(t){return e.handleCloseTag(a)}}},[e._v(" "+e._s(a.categoryName)+" ")])})),e.inputVisible?t("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+新建标签")])],2)},h=[],g=(a(8862),a(9284)),b={name:"ArticleTags",props:["categoryContent","isEdit"],mounted(){this.isEdit&&(this.inputVisible=!1)},watch:{categoryContent:{immediate:!0,deep:!0,handler(e){this.category=e}},category:{immediate:!0,deep:!0,handler(e){g.Z.setData("tag",JSON.stringify(e)),this.$emit("getNewTag",e)}}},methods:{showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(){let e=this.inputValue.trim();null==this.category&&(this.category=[]);let t=this.category,a=!1;if(e){for(let l=0;l<t.length;l++)if(t[l].categoryName===e){this.$message({type:"error",message:"标签不能重复"}),a=!0;break}a||this.category.push({categoryName:e})}this.inputVisible=!1,this.inputValue=""},handleCloseTag(e){this.category.splice(this.category.indexOf(e),1)}},data(){return{inputVisible:!1,inputValue:"",category:this.categoryContent}}},f=b,y=(0,d.Z)(f,p,h,!1,null,"178de708",null),v=y.exports,w=a(7025),C=a(4973),k=a(1684),S=a(3907),x={name:"ArticleFact",components:{ArticleTags:v,MyMarkDown:m},props:["dealId"],mounted(){this.selectAll()},methods:{handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},async beforeAvatarUpload(e){let t=this;const a=e.type,l=e.size/1024/1024<3;let i="";if("image/jpeg"!==a&&"image/png"!==a&&(i+="上传封面图片只能是 JPG或PNG格式!"),l||(i+="上传封面图片大小不能超过 3MB!"),i.length>0)this.$message.error(i);else{t.file=e;let a={file:e};await(0,S.K)(a).then((e=>{this.$set(this.addForm,"articleThImg",e.data.data),this.$set(this.updateForm,"articleThImg",e.data.data)}))}return i.length<=0},ZanCunCli(){},QingKongCli(){this.addForm={},this.updateForm={}},getNewTag(e){this.updateForm.category=e},UpadetCli(){let e=this;e.updateForm.category=JSON.parse(g.Z.getData("tag")),g.Z.removeUser("tag"),e.updateForm.oldarticleTitle=this.oldarticleTitle,w.fS.updateData(this,e.updateForm,k.q+"/Admin/updateArticles"),this.dialogVisibleUpdate=!1,this.QingKongCli()},SubmitCli(){let e=this;e.addForm.category=JSON.parse(g.Z.getData("tag")),this.$http.post(k.q+"/Admin/addArticles",e.addForm).then((t=>{t.data.code===C.Z.data().SAVE_OK?(e.selectAll(),g.Z.removeUser("tag"),g.Z.removeUser("tag"),C.Z.methods.AddOk(e)):C.Z.methods.AddErr(e,t.data.message)}))},translateText(e){this.addForm.articleContent=e,this.updateForm.articleContent=e},handleSizeChange(e){this.pageSize=e,this.selectAll()},handleCurrentChange(e){this.currentPage=e,this.selectAll()},selectAll(){let e={currPage:this.currentPage,pageSize:this.pageSize,search:this.search};w.bt.selectPage(this,e,k.q+"/Admin/getArticles")},onSubmit(){this.selectAll()},handleClose(){this.dialogVisibleAdd=!1,this.dialogVisibleUpdate=!1},tableRowClassName({row:e,rowIndex:t}){return 1===t?"warning-row":3===t?"success-row":""},editUser(e){this.dialogVisibleUpdate=!0,this.updateForm=e,this.oldarticleTitle=this.updateForm.articleTitle},removeUser(e){let t=[e.articleId];w.Pp.removeData(this,t,k.q+"/Admin/removeArticles"),this.selectAll()},toggleSelection(e){e?e.forEach((e=>{this.$refs.clearCheckBox.toggleRowSelection(e)})):this.$refs.clearCheckBox.clearSelection()},manyRemoveUser(){let e=[];for(let t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].articleId);e.length>0?w.Pp.removeData(this,e,k.q+"/Admin/removeArticles"):C.Z.methods.IllegalDelete(this)},handleSelectionChange(e){this.multipleSelection=e}},data(){return{file:{},oldarticleTitle:"",addForm:{},updateForm:{},totalCount:0,checkedUsers:[],total:400,currentPage:1,pageSize:5,dialogVisibleAdd:!1,dialogVisibleUpdate:!1,tableData:[],selectedIds:[],multipleSelection:[],search:{content:"",title:""},imageUrl:"",dialogImageUrl:"",dialogVisibleImg:!1}}},D=x,F=(0,d.Z)(D,l,i,!1,null,"23bef6ad",null),A=F.exports},9732:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});a(4916);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pageDataCls"},[t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"搜内容"}},[t("el-input",{attrs:{placeholder:"随便输入"},model:{value:e.search.content,callback:function(t){e.$set(e.search,"content",t)},expression:"search.content"}})],1)],1),t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"搜标题"}},[t("el-input",{attrs:{placeholder:"随便输入"},model:{value:e.search.title,callback:function(t){e.$set(e.search,"title",t)},expression:"search.title"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),t("div",{staticStyle:{display:"flex"}},[t("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.dialogVisibleAdd=!0}}},[e._v("新增")]),t("el-button",{attrs:{type:"danger",plain:""},on:{click:e.manyRemoveUser}},[e._v("批量删除")])],1),[t("el-table",{ref:"clearCheckBox",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),t("el-table-column",{attrs:{label:"序号",type:"index",width:"48"}}),t("el-table-column",{attrs:{align:"center",prop:"articleId",label:"文章ID"}}),t("el-table-column",{attrs:{align:"center",prop:"articleUserId",label:"用户ID"}}),t("el-table-column",{attrs:{align:"center",prop:"articleTitle",label:"文章标题"}}),t("el-table-column",{attrs:{align:"center",prop:"articleViewCount",sortable:"",label:"浏览量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleCommentCount",sortable:"",label:"评论量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleDianzanCount",sortable:"",label:"点赞量"}}),t("el-table-column",{attrs:{align:"center",prop:"articleUpdateTime",label:"更新时间",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"articleCreateTime",label:"创建时间",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"",label:"摘要"}}),t("el-table-column",{attrs:{align:"center",prop:"articleThImg",label:"封面地址"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",[e._v(e._s(a.row.articleThImg))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("img",{attrs:{width:"90",src:a.row.articleThImg}})])])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"operation",label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editUser(a.row)}}},[e._v("修改")]),t("br"),t("br"),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.removeUser(a.row)}}},[e._v("删除")])]}}])})],1)],t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{staticClass:"el-dialog11",attrs:{fullscreen:!0,modal:!1,title:"新增文章",visible:e.dialogVisibleAdd,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleAdd=t}}},[t("MyMarkDown",{attrs:{MyMarkDownData:"hello"},on:{formSubmit:e.translateText}}),t("el-form",{staticStyle:{margin:"10px auto"},attrs:{"label-width":"80px",model:e.addForm}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{model:{value:e.addForm.articleTitle,callback:function(t){e.$set(e.addForm,"articleTitle",t)},expression:"addForm.articleTitle"}})],1),t("el-form-item",{attrs:{label:"摘要"}},[t("el-input",{model:{value:e.addForm.articleSummary,callback:function(t){e.$set(e.addForm,"articleSummary",t)},expression:"addForm.articleSummary"}})],1),t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[t("el-form-item",{staticStyle:{"background-color":"wheat",height:"200px"},attrs:{label:"文章便签"}},[t("ArticleTags",{staticStyle:{width:"950px","min-width":"950px"},attrs:{isEdit:!0,categoryContent:e.addForm.category}})],1),t("img",{staticStyle:{width:"148px",height:"148px"},attrs:{alt:"NULL",src:e.addForm.articleThImg}}),t("el-upload",{attrs:{action:"","list-type":"picture-card","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[t("div",[e._v("点击上传文章封面")])])],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"success",round:""},on:{click:e.SubmitCli}},[e._v("提交")]),t("el-button",{attrs:{type:"info",round:""},on:{click:e.ZanCunCli}},[e._v("暂存")]),t("el-button",{attrs:{type:"danger",round:""},on:{click:e.QingKongCli}},[e._v("清空")])],1)],1)],1),t("el-dialog",{staticClass:"el-dialog11",attrs:{fullscreen:!0,modal:!1,title:"修改文章",visible:e.dialogVisibleUpdate,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleUpdate=t}}},[t("MyMarkDown",{attrs:{MyMarkDownData:this.updateForm.articleContent},on:{formSubmit:e.translateText}}),t("el-form",{attrs:{"label-width":"80px",model:e.updateForm}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"标题"}},[t("el-input",{model:{value:e.updateForm.articleContent,callback:function(t){e.$set(e.updateForm,"articleContent",t)},expression:"updateForm.articleContent"}})],1),t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{model:{value:e.updateForm.articleTitle,callback:function(t){e.$set(e.updateForm,"articleTitle",t)},expression:"updateForm.articleTitle"}})],1),t("el-form-item",{attrs:{label:"摘要"}},[t("el-input",{model:{value:e.updateForm.articleSummary,callback:function(t){e.$set(e.updateForm,"articleSummary",t)},expression:"updateForm.articleSummary"}})],1),t("div",{staticStyle:{display:"flex","align-items":"center","flex-direction":"column","justify-content":"space-between"}},[t("el-form-item",{staticStyle:{"background-color":"wheat",height:"200px"},attrs:{label:"文章标签"}},[t("ArticleTags",{staticStyle:{width:"950px","min-width":"950px"},attrs:{isEdit:!0,getNewTag:e.getNewTag,categoryContent:e.updateForm.category}})],1),t("div",{staticStyle:{display:"flex"}},[t("img",{staticStyle:{width:"148px",height:"148px"},attrs:{alt:"请上传图片",src:e.updateForm.articleThImg}}),t("el-upload",{attrs:{action:"","list-type":"picture-card","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[t("div",[e._v("点击上传文章封面")])])],1)],1),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"success",round:""},on:{click:e.UpadetCli}},[e._v("提交")]),t("el-button",{attrs:{type:"danger",round:""},on:{click:function(t){e.dialogVisibleUpdate=!1}}},[e._v("返回")])],1)],1)],1)],2)},i=[],r=(a(3948),a(285),a(1637),a(7658),function(){var e=this,t=e._self._c;return t("div",[t("MavonEditor",{model:{value:e.myMarkDownData,callback:function(t){e.myMarkDownData=t},expression:"myMarkDownData"}})],1)}),s=[],n=a(1374),o={name:"MyMarkDown",props:["MyMarkDownData"],components:{MavonEditor:n.ZP},data(){return{myMarkDownData:this.MyMarkDownData}},watch:{MyMarkDownData(e){this.myMarkDownData=e},myMarkDownData(e){this.$emit("formSubmit",e)}},methods:{submit(){this.filterHtmlCharset(this.myMarkDownData)},filterHtmlCharset(e){var t=/([\u4e00-\u9fa5])|(\d)|(\w)|([,\\.!。，?])/g;return e.match(t).join("")}}},c=o,d=a(1001),u=(0,d.Z)(c,r,s,!1,null,null,null),m=u.exports,p=function(){var e=this,t=e._self._c;return t("div",[e._l(e.category,(function(a,l){return t("el-tag",{key:l,attrs:{closable:e.isEdit,"disable-transitions":!1,type:"success"},on:{close:function(t){return e.handleCloseTag(a)}}},[e._v(" "+e._s(a.categoryName)+" ")])})),e.inputVisible?t("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+新建标签")])],2)},h=[],g=(a(8862),a(9284)),b={name:"ArticleTags",props:["categoryContent","isEdit"],mounted(){this.isEdit&&(this.inputVisible=!1)},watch:{categoryContent:{immediate:!0,deep:!0,handler(e){this.category=e}},category:{immediate:!0,deep:!0,handler(e){g.Z.setData("tag",JSON.stringify(e)),this.$emit("getNewTag",e)}}},methods:{showInput(){this.inputVisible=!0,this.$nextTick((()=>{this.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm(){let e=this.inputValue.trim();null==this.category&&(this.category=[]);let t=this.category,a=!1;if(e){for(let l=0;l<t.length;l++)if(t[l].categoryName===e){this.$message({type:"error",message:"标签不能重复"}),a=!0;break}a||this.category.push({categoryName:e})}this.inputVisible=!1,this.inputValue=""},handleCloseTag(e){this.category.splice(this.category.indexOf(e),1)}},data(){return{inputVisible:!1,inputValue:"",category:this.categoryContent}}},f=b,y=(0,d.Z)(f,p,h,!1,null,"3154ec19",null),v=y.exports,w=a(7025),C=a(4973),k=a(1684),S=a(3907),x={name:"ArticleFact",components:{ArticleTags:v,MyMarkDown:m},props:["dealId"],mounted(){this.selectAll()},methods:{handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},async beforeAvatarUpload(e){let t=this;const a=e.type,l=e.size/1024/1024<3;let i="";if("image/jpeg"!==a&&"image/png"!==a&&(i+="上传封面图片只能是 JPG或PNG格式!"),l||(i+="上传封面图片大小不能超过 3MB!"),i.length>0)this.$message.error(i);else{t.file=e;let a={file:e};await(0,S.K)(a).then((e=>{this.$set(this.addForm,"articleThImg",e.data.data),this.$set(this.updateForm,"articleThImg",e.data.data)}))}return i.length<=0},ZanCunCli(){},QingKongCli(){this.addForm={},this.updateForm={}},getNewTag(e){this.updateForm.category=e},UpadetCli(){let e=this;e.updateForm.category=JSON.parse(g.Z.getData("tag")),g.Z.removeUser("tag"),e.updateForm.oldarticleTitle=this.oldarticleTitle,w.fS.updateData(this,e.updateForm,k.q+"/Admin/updateArticles"),this.dialogVisibleUpdate=!1,this.QingKongCli()},SubmitCli(){let e=this;e.addForm.category=JSON.parse(g.Z.getData("tag")),this.$http.post(k.q+"/Admin/addArticles",e.addForm).then((t=>{t.data.code===C.Z.data().SAVE_OK?(e.selectAll(),g.Z.removeUser("tag"),g.Z.removeUser("tag"),C.Z.methods.AddOk(e)):C.Z.methods.AddErr(e,t.data.message)}))},translateText(e){this.addForm.articleContent=e,this.updateForm.articleContent=e},handleSizeChange(e){this.pageSize=e,this.selectAll()},handleCurrentChange(e){this.currentPage=e,this.selectAll()},selectAll(){let e={currPage:this.currentPage,pageSize:this.pageSize,search:this.search};w.bt.selectPage(this,e,k.q+"/Admin/getArticles")},onSubmit(){this.selectAll()},handleClose(){this.dialogVisibleAdd=!1,this.dialogVisibleUpdate=!1},tableRowClassName({row:e,rowIndex:t}){return 1===t?"warning-row":3===t?"success-row":""},editUser(e){this.dialogVisibleUpdate=!0,this.updateForm=e,this.oldarticleTitle=this.updateForm.articleTitle},removeUser(e){let t=[e.articleId];w.Pp.removeData(this,t,k.q+"/Admin/removeArticles"),this.selectAll()},toggleSelection(e){e?e.forEach((e=>{this.$refs.clearCheckBox.toggleRowSelection(e)})):this.$refs.clearCheckBox.clearSelection()},manyRemoveUser(){let e=[];for(let t=0;t<this.multipleSelection.length;t++)e.push(this.multipleSelection[t].articleId);e.length>0?w.Pp.removeData(this,e,k.q+"/Admin/removeArticles"):C.Z.methods.IllegalDelete(this)},handleSelectionChange(e){this.multipleSelection=e}},data(){return{file:{},oldarticleTitle:"",addForm:{},updateForm:{},totalCount:0,checkedUsers:[],total:400,currentPage:1,pageSize:5,dialogVisibleAdd:!1,dialogVisibleUpdate:!1,tableData:[],selectedIds:[],multipleSelection:[],search:{content:"",title:""},imageUrl:"",dialogImageUrl:"",dialogVisibleImg:!1}}},D=x,F=(0,d.Z)(D,l,i,!1,null,"dab7dafc",null),A=F.exports},7025:function(e,t,a){"use strict";a.d(t,{Pp:function(){return i},bt:function(){return r},fS:function(){return s}});var l=a(4973);const i={removeData(e,t,a){e.$confirm("此操作将永远删除条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{e.$http.post(a,t).then((t=>{t.data.code===l.Z.data().DELETE_OK?(l.Z.methods.deleteOk(e),e.selectAll()):l.Z.methods.deleteErr(e)}))})).catch((()=>{l.Z.methods.deleteCancel(e)}))}},r={selectPage(e,t,a){var l=e;e.$http.post(a,t).then((e=>{l.tableData=e.data.data.pageDataList,l.totalCount=e.data.data.total}))},selectAll(e,t){var a=e;e.$http.get(t).then((e=>{a.tableData=e.data.data}))},selectAllBySearchData(e,t,a){var l=e;e.$http.post(a,t).then((e=>{l.tableData=e.data.data}))}},s={updateData(e,t,a){let i=e;e.$http.post(a,t).then((t=>{t.data.code===l.Z.data().UPDATE_OK?(l.Z.methods.updateOk(e),i.selectAll()):l.Z.methods.updateErr(e)}))}}},9296:function(e,t,a){var l={"./mobile/ManageFact/ArticleFact":3534,"./pc/ManageFact/ArticleFact":9732};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}i.keys=function(){return Object.keys(l)},i.resolve=r,e.exports=i,i.id=9296}}]);
//# sourceMappingURL=296.900668ae.js.map